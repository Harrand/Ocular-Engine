<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Topaz: tz::gl::TextureSentinel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Topaz
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>tz</b></li><li class="navelem"><b>gl</b></li><li class="navelem"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html">TextureSentinel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtz_1_1gl_1_1_texture_sentinel-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tz::gl::TextureSentinel Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GL_ARB_bindless_texture is an incredibly dangerous extension, so the sentinel is designed to minimise hazards should the feature ever be misused.  
 <a href="classtz_1_1gl_1_1_texture_sentinel.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="texture__sentinel_8hpp_source.html">texture_sentinel.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3febec8a1aeebcae1585ec60dcb7d410"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#a3febec8a1aeebcae1585ec60dcb7d410">register_handle</a> (GLuint64 handle)</td></tr>
<tr class="memdesc:a3febec8a1aeebcae1585ec60dcb7d410"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an existing bindless texture handle.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#a3febec8a1aeebcae1585ec60dcb7d410">More...</a><br /></td></tr>
<tr class="separator:a3febec8a1aeebcae1585ec60dcb7d410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83c3430cb99176e64b83532fffe12bd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#a83c3430cb99176e64b83532fffe12bd6">register_handle</a> (GLuint tex_name, GLuint64 handle)</td></tr>
<tr class="memdesc:a83c3430cb99176e64b83532fffe12bd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an existing bindless texture handle aswell as its corresponding texture name.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#a83c3430cb99176e64b83532fffe12bd6">More...</a><br /></td></tr>
<tr class="separator:a83c3430cb99176e64b83532fffe12bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83c82986d56f2ee2bf79d7473b56fda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#ac83c82986d56f2ee2bf79d7473b56fda">make_resident</a> (GLuint64 handle)</td></tr>
<tr class="memdesc:ac83c82986d56f2ee2bf79d7473b56fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a registered bindless texture handle resident, signifying that it can be used in subsequent draw calls.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#ac83c82986d56f2ee2bf79d7473b56fda">More...</a><br /></td></tr>
<tr class="separator:ac83c82986d56f2ee2bf79d7473b56fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045e8e5b547f402a745c46f750c27d2d"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#a045e8e5b547f402a745c46f750c27d2d">registered_handle_count</a> () const</td></tr>
<tr class="memdesc:a045e8e5b547f402a745c46f750c27d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the number of handles currently registered.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#a045e8e5b547f402a745c46f750c27d2d">More...</a><br /></td></tr>
<tr class="separator:a045e8e5b547f402a745c46f750c27d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdbcf2501f04ee95df2aac012e626832"><td class="memItemLeft" align="right" valign="top">GLuint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#abdbcf2501f04ee95df2aac012e626832">get_handle</a> (std::size_t id) const</td></tr>
<tr class="memdesc:abdbcf2501f04ee95df2aac012e626832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a registered handle by its id.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#abdbcf2501f04ee95df2aac012e626832">More...</a><br /></td></tr>
<tr class="separator:abdbcf2501f04ee95df2aac012e626832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33b38d5abf7a892a23bbf33b11be43fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#a33b38d5abf7a892a23bbf33b11be43fe">registered</a> (GLuint64 handle) const</td></tr>
<tr class="memdesc:a33b38d5abf7a892a23bbf33b11be43fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query as to whether the given handle has been registered before.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#a33b38d5abf7a892a23bbf33b11be43fe">More...</a><br /></td></tr>
<tr class="separator:a33b38d5abf7a892a23bbf33b11be43fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9525b603d13e765cc952db77ce3bfb3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#ad9525b603d13e765cc952db77ce3bfb3">resident</a> (GLuint64 handle) const</td></tr>
<tr class="memdesc:ad9525b603d13e765cc952db77ce3bfb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query as to whether the given handle is resident and thus is useable for rendering.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#ad9525b603d13e765cc952db77ce3bfb3">More...</a><br /></td></tr>
<tr class="separator:ad9525b603d13e765cc952db77ce3bfb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1abd6f91eaa3070af092e2a656a1502"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#af1abd6f91eaa3070af092e2a656a1502">ready</a> (GLuint64 handle) const</td></tr>
<tr class="memdesc:af1abd6f91eaa3070af092e2a656a1502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logically equivalent to this-&gt;<a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#ad9525b603d13e765cc952db77ce3bfb3" title="Query as to whether the given handle is resident and thus is useable for rendering.">resident()</a>, but should be preferred.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#af1abd6f91eaa3070af092e2a656a1502">More...</a><br /></td></tr>
<tr class="separator:af1abd6f91eaa3070af092e2a656a1502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bfd35c5e1bc14b96758f4154aa33db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#a19bfd35c5e1bc14b96758f4154aa33db">notify_usage</a> (GLuint64 handle) const</td></tr>
<tr class="memdesc:a19bfd35c5e1bc14b96758f4154aa33db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify the sentinel that the given handle is about to be used.  <a href="classtz_1_1gl_1_1_texture_sentinel.html#a19bfd35c5e1bc14b96758f4154aa33db">More...</a><br /></td></tr>
<tr class="separator:a19bfd35c5e1bc14b96758f4154aa33db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f32463ecfbcaaac129839500deadfe1"><td class="memItemLeft" align="right" valign="top"><a id="a8f32463ecfbcaaac129839500deadfe1"></a>
std::optional&lt; GLuint &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>get_texture_name</b> (GLuint64 handle) const</td></tr>
<tr class="separator:a8f32463ecfbcaaac129839500deadfe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GL_ARB_bindless_texture is an incredibly dangerous extension, so the sentinel is designed to minimise hazards should the feature ever be misused. </p>
<p>Note: GL_ARB_bindless_texture is required for this sentinel to be useful. It will not assert/invoke UB of any kind without it, but is not useful. Note: Terminal textures make use of GL_ARB_bindless_texture. Note: TextureSentinels are entirely stubbed out in release. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abdbcf2501f04ee95df2aac012e626832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbcf2501f04ee95df2aac012e626832">&#9670;&nbsp;</a></span>get_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLuint64 tz::gl::TextureSentinel::get_handle </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a registered handle by its id. </p>
<p>DEPRECATED: This makes no sense to use in its current form and will be reworked/removed. Do not use this method. Precondition: The given id is within range. Otherwise, this will assert and invoke UB. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The first handle to be registered will have id 0, the next 1, and so on... I know, this is terrible. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle at the given id. </dd></dl>

</div>
</div>
<a id="ac83c82986d56f2ee2bf79d7473b56fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83c82986d56f2ee2bf79d7473b56fda">&#9670;&nbsp;</a></span>make_resident()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::TextureSentinel::make_resident </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a registered bindless texture handle resident, signifying that it can be used in subsequent draw calls. </p>
<p>Precondition: The given handle has already been registered. Otherwise, this will hard-assert. Precondition: The given handle has not yet been made resident. Otherwise, this will hard-assert. </p>

</div>
</div>
<a id="a19bfd35c5e1bc14b96758f4154aa33db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bfd35c5e1bc14b96758f4154aa33db">&#9670;&nbsp;</a></span>notify_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::TextureSentinel::notify_usage </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify the sentinel that the given handle is about to be used. </p>
<p>You should invoke this for all terminal textures that you're about to use to render with. Note: If handle is not ready, this will hard-assert. This should always be a check you make &ndash; Misusing a bindless texture in this way can crash your GPU or bring down the whole OS. Much better to hard-assert. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle for which to query status. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1abd6f91eaa3070af092e2a656a1502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1abd6f91eaa3070af092e2a656a1502">&#9670;&nbsp;</a></span>ready()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tz::gl::TextureSentinel::ready </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logically equivalent to this-&gt;<a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#ad9525b603d13e765cc952db77ce3bfb3" title="Query as to whether the given handle is resident and thus is useable for rendering.">resident()</a>, but should be preferred. </p>
<p>Query as to whether the given handle is both registered and resident. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle for which to query status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the handle is resident. Otherwise false. </dd></dl>

</div>
</div>
<a id="a83c3430cb99176e64b83532fffe12bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c3430cb99176e64b83532fffe12bd6">&#9670;&nbsp;</a></span>register_handle() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::TextureSentinel::register_handle </td>
          <td>(</td>
          <td class="paramtype">GLuint&#160;</td>
          <td class="paramname"><em>tex_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an existing bindless texture handle aswell as its corresponding texture name. </p>
<p>Note: The handle can be retrieved from a terminal texture via <a class="el" href="classtz_1_1gl_1_1_texture.html#a55c49e2469593c777744cf2a4dcb8b2a" title="Retrieve a bindless texture handle which can be inserted into a UBO/SSBO.">Texture::get_terminal_handle</a>. Precondition: The given handle has not already been registered. Otherwise, thsi will hard-assert. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tex_name</td><td><a class="el" href="classtz_1_1gl_1_1_texture.html" title="Used to store image data in VRAM.">Texture</a> name to associate with the coming bindless handle. </td></tr>
    <tr><td class="paramname">handle</td><td>Bindless texture handle to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3febec8a1aeebcae1585ec60dcb7d410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3febec8a1aeebcae1585ec60dcb7d410">&#9670;&nbsp;</a></span>register_handle() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tz::gl::TextureSentinel::register_handle </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an existing bindless texture handle. </p>
<p>Note: This can be retrieved from a terminal texture via <a class="el" href="classtz_1_1gl_1_1_texture.html#a55c49e2469593c777744cf2a4dcb8b2a" title="Retrieve a bindless texture handle which can be inserted into a UBO/SSBO.">Texture::get_terminal_handle</a>. Precondition: The given handle has not already been registered. Otherwise, this will hard-assert. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Bindless texture handle to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33b38d5abf7a892a23bbf33b11be43fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33b38d5abf7a892a23bbf33b11be43fe">&#9670;&nbsp;</a></span>registered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tz::gl::TextureSentinel::registered </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query as to whether the given handle has been registered before. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle for which to query status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if handle is registered. Otherwise false. </dd></dl>

</div>
</div>
<a id="a045e8e5b547f402a745c46f750c27d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045e8e5b547f402a745c46f750c27d2d">&#9670;&nbsp;</a></span>registered_handle_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t tz::gl::TextureSentinel::registered_handle_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the number of handles currently registered. </p>
<p>Note: This includes resident and non-resident handles. </p><dl class="section return"><dt>Returns</dt><dd>Number of registered handles. </dd></dl>

</div>
</div>
<a id="ad9525b603d13e765cc952db77ce3bfb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9525b603d13e765cc952db77ce3bfb3">&#9670;&nbsp;</a></span>resident()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tz::gl::TextureSentinel::resident </td>
          <td>(</td>
          <td class="paramtype">GLuint64&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query as to whether the given handle is resident and thus is useable for rendering. </p>
<p>Note: It is logical to deduce that any handle which is resident must also be registered, but this is not guaranteed. This may not be the case for example if this sentinel has been misused but hard-asserts were disabled so it hasn't crashed. Note: For the reason above, you should prefer this-&gt;<a class="el" href="classtz_1_1gl_1_1_texture_sentinel.html#af1abd6f91eaa3070af092e2a656a1502" title="Logically equivalent to this-&gt;resident(), but should be preferred.">ready()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle for which to query status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the handle is resident. Otherwise false. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/gl/<a class="el" href="texture__sentinel_8hpp_source.html">texture_sentinel.hpp</a></li>
<li>src/gl/texture_sentinel.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
